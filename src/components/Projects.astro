---
import { useTranslations, type Locale } from "../i18n/index";
import GithubIcon from "../icons/Github.astro";
import NextjsIcon from "../icons/Nextjs.astro";
import WebIcon from "../icons/Web.astro";
import TailwindCSSIcon from "../icons/TailwindCSS.astro";
import ReactIcon from "../icons/React.astro";
import ExpoIcon from "../icons/Expo.astro";
import CSSIcon from "../icons/CSS.astro";
import OpenAIIcon from "../icons/OpenAI.astro";
import AndroidIcon from "../icons/Android.astro";
import JavascriptIcon from "../icons/Javascript.astro";
import TypescriptIcon from "../icons/Typescript.astro";
import SupabaseIcon from "../icons/Supabase.astro";
import PineconeIcon from "../icons/Pinecone.astro";
import LinkButton from "./LinkButton.astro";
import Carrousel from "./Carrousel.astro";

interface Props {
  lang: Locale;
}

const { lang } = Astro.props;
const t = useTranslations(lang);

const TAGS = {
  NEXT: {
    name: "Next.js",
    class: "bg-[#003159] text-white",
    icon: NextjsIcon,
  },
  TAILWIND: {
    name: "TailwindCSS",
    class: "bg-[#003159] text-white",
    icon: TailwindCSSIcon,
  },
  REACT: {
    name: "React",
    class: "bg-[#003159] text-white",
    icon: ReactIcon,
  },
  REACTNATIVE: {
    name: "React Native",
    class: "bg-[#003159] text-white",
    icon: ReactIcon,
  },
  EXPO: {
    name: "Expo",
    class: "bg-[#003159] text-white",
    icon: ExpoIcon,
  },
  JAVASCRIPT: {
    name: "Javascript",
    class: "bg-[#003159] text-white",
    icon: JavascriptIcon,
  },
  TYPESCRIPT: {
    name: "Typescript",
    class: "bg-[#003159] text-white",
    icon: TypescriptIcon,
  },
  CSS: {
    name: "CSS",
    class: "bg-[#003159] text-white",
    icon: CSSIcon,
  },
  AI: {
    name: "OpenAI",
    class: "bg-[#003159] text-white",
    icon: OpenAIIcon,
  },
  SUPABASE: {
    name: "Supabase",
    class: "bg-[#003159] text-white",
    icon: SupabaseIcon,
  },
  PINECONE: {
    name: "Pinecone",
    class: "bg-[#003159] text-white",
    icon: PineconeIcon,
  },
};

interface Tag {
  name: string;
  class: string;
  icon: typeof NextjsIcon | typeof TailwindCSSIcon;
}

interface ProjectCardProps {
  title: string;
  descriptionKey: keyof (typeof import("../i18n/index"))["ui"]["en"];
  link?: string;
  github?: string;
  image: string | string[];
  tags?: Tag[];
  app: boolean;
}

const PROJECTS: ProjectCardProps[] = [
  {
    title: "Onde",
    descriptionKey: "project.onde.description",
    link: "https://www.onde.pt/",
    image: [
      "/projects/Onde/Home.png",
      "/projects/Onde/mapChat.png",
      "/projects/Onde/propertyChat1.png",
      "/projects/Onde/propertyChat2.webp",
    ],
    tags: [
      TAGS.REACT,
      TAGS.AI,
      TAGS.PINECONE,
      TAGS.SUPABASE,
      TAGS.TAILWIND,
      TAGS.TYPESCRIPT,
    ],
    app: false,
  },
  {
    title: "SugarSync",
    descriptionKey: "project.sugarsync.description",
    image: [
      "/projects/SugarSync/main.webp",
      "/projects/SugarSync/onboarding.webp",
      "/projects/SugarSync/views.webp",
      "/projects/SugarSync/config.webp",
    ],
    tags: [
      TAGS.REACTNATIVE,
      TAGS.AI,
      TAGS.PINECONE,
      TAGS.SUPABASE,
      TAGS.TAILWIND,
      TAGS.TYPESCRIPT,
    ],
    app: false,
  },
  {
    title: "Pursuit",
    descriptionKey: "project.pursuit.description",
    github: "https://github.com/AJoaquinLizarraga/PursuitMobile/tree/Joaquin",
    image: [
      "/projects/Pursuit/Pursuit3.webp",
      "/projects/Pursuit/PursuitOnboarding.webp",
      "/projects/Pursuit/PursuitTraining2.webp",
      "/projects/Pursuit/Pursuittrainingscreen.webp",
      "/projects/Pursuit/PursuitIpad.webp",
    ],
    tags: [
      TAGS.REACTNATIVE,
      TAGS.EXPO,
      TAGS.AI,
      TAGS.PINECONE,
      TAGS.SUPABASE,
      TAGS.TAILWIND,
      TAGS.TYPESCRIPT,
    ],
    app: false,
  },
  {
    title: "Rentscape",
    descriptionKey: "project.rentscape.description",
    link: "https://www.rentscape.co/",
    image: [
      "/projects/Rentscape/rentscapechat.webp",
      "/projects/Rentscape/rentscapeCarrousel.webp",
    ],
    tags: [
      TAGS.NEXT,
      TAGS.TAILWIND,
      TAGS.TYPESCRIPT,
      TAGS.AI,
      TAGS.PINECONE,
      TAGS.SUPABASE,
    ],
    app: false,
  },
  {
    title: "Blog Web",
    descriptionKey: "project.blog.description",
    link: "https://www.bocancorporation.com",
    github: "",
    image: [
      "/projects/BocancorpApp/MainScreen.webp",
      "/projects/BocancorpApp/DetailScreen.webp",
      "/projects/BocancorpApp/DetailScrolledScreen.webp",
      "/projects/BocancorpApp/ActiveScreen.webp",
      "/projects/BocancorpApp/PostScreen.webp",
      "/projects/BocancorpApp/ProfilesScreen.webp",
      "/projects/BocancorpApp/MDScreen.webp",
      "/projects/BocancorpApp/StackScreen.webp",
      "https://www.youtube.com/embed/KRTnl7txiGU?si=Q68xbzdxvZB26Tpz",
    ],
    tags: [
      TAGS.JAVASCRIPT,
      TAGS.TYPESCRIPT,
      TAGS.REACT,
      TAGS.NEXT,
      TAGS.CSS,
      TAGS.TAILWIND,
    ],
    app: false,
  },
  {
    title: "Pokedex App",
    descriptionKey: "project.pokedex.description",
    link: "https://drive.google.com/file/d/1YFbbOr6ijkfd_z4Uv9j8WQSwuhueabli/view?usp=drive_link",
    github: "https://github.com/AJoaquinLizarraga/PokedexApp-ReactNative.git",
    image: [
      "/projects/pokedex/pokedexMain.webp",
      "/projects/pokedex/PokedexScreens.webp",
      "/projects/pokedex/PokedexScreens2.webp",
      "/projects/pokedex/PokedexScreens4.webp",
      "https://www.youtube.com/embed/XYLJSnfaQ54?si=6zV0Yp5DKQTFxBw9",
    ],
    tags: [TAGS.REACTNATIVE, TAGS.TAILWIND, TAGS.EXPO, TAGS.JAVASCRIPT],
    app: true,
  },
  {
    title: "Nasa App",
    descriptionKey: "project.nasa.description",
    link: "",
    github: "https://github.com/AJoaquinLizarraga/NasaApp.git",
    image: [
      "/projects/NasaApp/MainScreens.webp",
      "/projects/NasaApp/DetailScreens.webp",
    ],
    tags: [TAGS.TYPESCRIPT, TAGS.REACTNATIVE, TAGS.CSS],
    app: true,
  },
  {
    title: "Pomodoro App",
    descriptionKey: "project.pomodoro.description",
    link: "",
    github: "https://github.com/AJoaquinLizarraga/PomodoroAppMobile.git",
    image: "/projects/PomodoroApp/MainScreens.webp",
    tags: [TAGS.JAVASCRIPT, TAGS.REACTNATIVE, TAGS.CSS],
    app: true,
  },
];
---

<section class="flex flex-col gap-y-16">
  {
    PROJECTS.map(
      ({ image, title, descriptionKey, tags, link, github, app }) => (
        <article>
          <h3 class="text-2xl font-semibold text-yellow-200 mb-2">{title}</h3>
          <p class="text-lg mb-4 text-pretty whitespace-pre-line">
            {t(descriptionKey)}
          </p>
          <ul class="flex gap-x-4 gap-y-2 flex-wrap sm:flex-wrap md:flex-row lg:flex-row mb-4">
            {tags &&
              tags.map((tag) => {
                return (
                  <li>
                    <span
                      class={`flex gap-x-2 rounded-full text-xs ${tag.class}  py-1 px-2`}>
                      <tag.icon class="size-4" />
                      {tag.name}
                    </span>
                  </li>
                );
              })}
          </ul>
          {typeof image === "string" ? (
            <div class="flex mx-auto lg:-mx-12 xl:-mx-20">
              <div class="relative w-full">
                <div class="overflow-hidden relative h-[307px] rounded-lg sm:h-[384px] xl:h-[460px] 2xl:h-[576px] z-20">
                  <img
                    src={image}
                    class="relative top-1/2 left-1/2 w-full h-full -translate-x-1/2 -translate-y-1/2 object-cover"
                    alt={`Screenshot of ${title}`}
                  />
                </div>
              </div>
            </div>
          ) : (
            <Carrousel images={image} />
          )}
          <footer class="flex justify-center gap-x-4 mt-2">
            {github && (
              <LinkButton link={github}>
                <GithubIcon class="size-6 mr-1" />
                {t("projects.viewCode")}
              </LinkButton>
            )}
            {link && (
              <LinkButton link={link}>
                {app === true ? (
                  <>
                    <AndroidIcon class="size-6 mr-1" />
                    {t("projects.downloadApp")}
                  </>
                ) : (
                  <>
                    <WebIcon class="size-6 mr-1" />
                    {t("projects.goToWeb")}
                  </>
                )}
              </LinkButton>
            )}
          </footer>
        </article>
      )
    )
  }
</section>
