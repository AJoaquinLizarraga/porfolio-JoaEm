---
import Layout from "../../layouts/Layout.astro";
import { useTranslations, type Locale } from "../../i18n/index";

import AboutMe from "../../components/AboutMe.astro";
import Badge from "../../components/Badge.astro";
import BriefcaseIcon from "../../icons/Briefcase.astro";
import CalendlyIcon from "../../icons/Calendly.astro";
import CodeSandBoxIcon from "../../icons/CodeSandBox.astro";
import Experience from "../../components/Experience.astro";
import GithubIcon from "../../icons/Github.astro";
import LinkedInIcon from "../../icons/LinkedIn.astro";
import MailIcon from "../../icons/Mail.astro";
import CVIcon from "../../icons/CV.astro";
import Projects from "../../components/Projects.astro";
import SectionContainer from "../../components/SectionContainer.astro";
import SocialPill from "../../icons/SocialPill.astro";
import UserIcon from "../../icons/User.astro";

const lang: Locale = "es";
const t = useTranslations(lang);
---

<Layout title={t("layout.title")} description={t("layout.description")}>
  <main class="px-4">
    <SectionContainer id="/#" class="py-12 pb-32">
      <h1
        class="text-white text-3xl md:text-4xl lg:text-5xl font-bold flex flex-row gap-x-4 pb-6 lg:pb-10">
        {t("hero.greeting")}
        <a
          class="flex justify-center items-center hover:scale-105"
          href="https://www.linkedin.com/in/joaquin-lizarraga-965637134/"
          target="_blank"
          rel="noopener">
          <Badge>{t("hero.badge")}</Badge>
        </a>
      </h1>
      <h2 class="text-xl lg:text-2xl opacity-80 text-wrap max-w-[700px]">
        <span class="text-yellow-300">{t("hero.role")}</span>
        <span
          class="bg-gradient-to-r from-blue-500 via-white to-blue-500 text-transparent bg-clip-text"
          >{t("hero.location")}</span
        >
        <span class="opacity-75">{t("hero.tagline")}</span>
      </h2>
      <nav class="flex gap-4 mt-8 flex-wrap">
        <SocialPill
          href="https://www.linkedin.com/in/joaquin-lizarraga-965637134/">
          <LinkedInIcon class="size-4 md:size-6" />
          LinkedIn
        </SocialPill>
        <SocialPill href="https://github.com/AJoaquinLizarraga">
          <GithubIcon class="size-4 md:size-6" />
          Github
        </SocialPill>
        <SocialPill href="https://calendly.com/joaem-lizarraga">
          <CalendlyIcon class="size-4 md:size-6" />
          Calendly
        </SocialPill>
        <button
          id="copy-email-btn"
          class="bg-white/5 border dark:border-white/10 border-gray-400 rounded-full flex justify-center items-center gap-x-2 py-1 px-2 sm:py-1 sm:px-2 md:py-2 md:px-4 text-xs sm:text-white md:text-white text-white dark:text-white/10 transition hover:scale-110 hover:bg-white/10 cursor-pointer"
          data-email="joaem.lizarraga@gmail.com">
          <MailIcon class="size-4 md:size-6" />
          <span id="email-text">joaem.lizarraga@gmail.com</span>
        </button>
        <SocialPill
          href="../../../assets/CV-es.pdf"
          download="Joaquin Emanuel Lizarraga - es">
          <CVIcon class="size-4 md:size-6" />
          {t("hero.downloadCV")}
        </SocialPill>
      </nav>
    </SectionContainer>
    <SectionContainer id="experience">
      <h2 class="text-3xl font-semibold mb-3 flex gap-x-2 items-center">
        <BriefcaseIcon class="size-8" />
        {t("section.experience")}
      </h2>
      <Experience lang={lang} />
    </SectionContainer>
    <SectionContainer id="projects">
      <h2 class="text-3xl font-semibold mb-3 flex gap-x-2 items-center">
        <CodeSandBoxIcon class="size-8" />
        {t("section.projects")}
      </h2>
      <Projects lang={lang} />
    </SectionContainer>
    <SectionContainer id="about">
      <h2 class="text-3xl font-semibold mb-3 flex gap-x-2 items-center">
        <UserIcon class="size-8" />
        {t("section.about")}
      </h2>
      <AboutMe lang={lang} />
    </SectionContainer>
  </main>
</Layout>

<script>
  const copyBtn = document.getElementById("copy-email-btn");
  const emailText = document.getElementById("email-text");

  if (copyBtn && emailText) {
    const originalText = "joaem.lizarraga@gmail.com";

    copyBtn.addEventListener("click", async () => {
      const email = copyBtn.getAttribute("data-email") || "";
      try {
        await navigator.clipboard.writeText(email);
        emailText.textContent = "Â¡Copiado al Portapapeles!";
        setTimeout(() => {
          emailText.textContent = originalText;
        }, 2000);
      } catch (err) {
        console.error("Error al copiar:", err);
      }
    });
  }
</script>
